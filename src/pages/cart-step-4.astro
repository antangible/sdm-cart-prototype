---
import Layout from '../layouts/Layout.astro';
import Product from '../components/Product.astro';
import Cart from '../components/Cart.astro';
---

<Layout title="SdM Fake cart">

	<main>

		<div class="container">
			<div class="row">
			  <div class="col-md-8">
				
				<div class="pb-4">
					<a class="mb-3" href="cart-step-3"><i class="fa-solid fa-chevron-left"></i> Indietro</a>
					<i class="fa-solid fa-train"></i>
					<h1>Intesta i biglietti del Salone del Mobile</h1>
				</div>

				<h3>Biglietto 1/4</h3>
				<div class="mb-0"><strong>Tipologia:</strong> Operatore | <strong>Taglio:</strong> 3 giorni <button type="button" class="btn btn-link">Cambia taglio biglietto</button></div>

				<div class="form-check form-switch py-4">
					<input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
					<label class="form-check-label" for="flexSwitchCheckDefault">Usa i miei dati per questo biglietto</label>
				</div>

				<!-- seleziona date -->

				<div class="border-top pt-4 mt-4">
					<h5 class="mb-0"><strong>Seleziona le date</strong></h5>
					<p>Puoi selezionare al massimo 3 date</p>
					<div class="py-4 d-flex">
						<div class="w-100 pe-4">
							<input type="checkbox" class="btn-check" id="btn-check-14" autocomplete="off">
							<label class="btn btn-outline-secondary w-100" for="btn-check-14">14 aprile</label>
						</div>
						<div class="w-100 pe-4">
							<input type="checkbox" class="btn-check" id="btn-check-15" autocomplete="off">
							<label class="btn btn-outline-secondary w-100" for="btn-check-15">15 aprile</label>
						</div>
						<div class="w-100 pe-4">
							<input type="checkbox" class="btn-check" id="btn-check-16" autocomplete="off">
							<label class="btn btn-outline-secondary w-100" for="btn-check-16">16 aprile</label>
						</div>
						<div class="w-100 pe-4">
							<input type="checkbox" class="btn-check" id="btn-check-17" autocomplete="off">
							<label class="btn btn-outline-secondary w-100" for="btn-check-17">17 aprile</label>
						</div>
						<div class="w-100 pe-4">
							<input type="checkbox" class="btn-check" id="btn-check-18" autocomplete="off">
							<label class="btn btn-outline-secondary w-100" for="btn-check-18">18 aprile</label>
						</div>
						<div class="w-100">
							<input type="checkbox" class="btn-check" id="btn-check-19" autocomplete="off">
							<label class="btn btn-outline-secondary w-100" for="btn-check-18">19 aprile</label>
						</div>
					</div>

					<div id="message"></div>

				</div>

				<!-- cross sell -->
				
				<div id="cross-sell-catalogo" class="border-top pt-4 mt-4 d-flex justify-content-between">
					<div>
						<h5 class="mb-0"><strong>Ritira catalogo in fiera</strong></h5>
						<p>quanti cataloghi verranno ritirati da [te]?</p>
					</div>
					<div class="d-flex">
						<p class="pe-4 mb-0 pt-2"><span id="quantita-cataloghi"></span> cataloghi da assegnare</p>
						<div class="quantity"><button class="remove-quantity btn btn-secondary" disabled="">-</button><span class="product-quantity px-3">0</span><button class="add-quantity btn btn-secondary">+</button></div>
					</div>
				</div>

				<div id="cross-sell-biglietti-atm" class="border-top pt-4 mt-4 d-flex justify-content-between">
					<div>
						<h5 class="mb-0"><strong>Assegna biglietti Atm</strong></h5>
						<p>quanti biglietti sono intestati a [te]??</p>
					</div>
					<div class="d-flex">
						<p class="pe-4 mb-0 pt-2"><span id="quantita-cataloghi"></span> biglietti da assegnare</p>
						<div class="quantity"><button class="remove-quantity btn btn-secondary" disabled="">-</button><span class="product-quantity px-3">0</span><button class="add-quantity btn btn-secondary">+</button></div>
					</div>
				</div>


			  </div>

			  <div class="col-md-4 d-none d-md-block">
				<div class="bg-lightgrey shadow-sm p-4">
					<p>Il tuo carrello</p>
					<Cart />
					<a href="cart-step-4" class="btn btn-primary">Procedi</a>
				</div>
				</div>
		  	</div>
		</div>

		<!-- carrello mobile -->

		<div class="fixed-bottom d-md-none">
			<div class="container my-3">
				<div class="row">
					<div class="col">
						<Cart />
						<a href="cart-step-4" class="btn btn-primary">Procedi</a>
					</div>
				</div>
			</div>
		</div>

		
	</main>

</Layout>

<style>

</style>


<div id="message" class="alert alert-warning d-none" role="alert"></div>

<script>
    // Ottieni tutti gli elementi checkbox con la classe 'btn-check'
    const checkboxes = document.querySelectorAll('.btn-check');

    // Aggiungi un ascoltatore di eventi a ciascun checkbox
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            // Conta quante checkbox sono selezionate
            const selectedCheckboxes = document.querySelectorAll('.btn-check:checked');
            
            // Ottieni il div del messaggio
            const messageDiv = document.getElementById('message');
            
            // Mostra un messaggio se sono selezionate piÃ¹ di 3 date
            if (selectedCheckboxes.length > 3) {
                messageDiv.innerHTML = "Puoi selezionare al massimo 3 date.";
                // Aggiungi classi e attributo role al div
                messageDiv.classList.remove('d-none');
                messageDiv.classList.add('alert', 'alert-warning');
                messageDiv.setAttribute('role', 'alert');
                // Disabilita la checkbox appena selezionata
                this.checked = false;
            } else {
                messageDiv.innerHTML = ""; // Cancella il messaggio se le selezioni sono valide
                // Rimuovi classi e attributo role dal div
                messageDiv.classList.add('d-none');
                messageDiv.classList.remove('alert', 'alert-warning');
                messageDiv.removeAttribute('role');
            }
        });
    });
</script>

<!-- 
<script>
    // Funzione per verificare se il carrello contiene almeno un prodotto con id "Catalogo Saloni 2024"
    function checkCartForCatalog() {
        // Ottieni tutti gli elementi del carrello
        const cartItems = document.querySelectorAll('.cart-item');
        let hasCatalogProduct = false;

        // Itera attraverso gli elementi del carrello
        cartItems.forEach(item => {
            // Verifica se l'elemento del carrello ha l'attributo data-product con valore "Catalogo Saloni 2024"
            if (item.dataset.product === "Catalogo Saloni 2024") {
                hasCatalogProduct = true;
            }
        });

        // Ottieni l'elemento del div "cross-sell-catalogo"
        const crossSellCatalogDiv = document.getElementById('cross-sell-catalogo');

        // Mostra o nascondi il div in base alla presenza del prodotto "Catalogo Saloni 2024"
        if (hasCatalogProduct) {
            crossSellCatalogDiv.classList.remove('d-none');
        } else {
            crossSellCatalogDiv.classList.add('d-none');
        }
    }

    // Esegui la funzione quando la pagina si carica
    window.addEventListener('DOMContentLoaded', checkCartForCatalog);
</script> -->





